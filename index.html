<!DOCTYPE html>
<html><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link href="css/bootstrap.min.css" rel="stylesheet" media="screen"><link href="css/starter-template.css" rel="stylesheet" media="screen"><title>Bootstrap Test</title><meta name="description" content="Hoplon demo testing Twitter Bootstrap library design."></head><body><script type="text/javascript">var CLOSURE_NO_DEPS = true;</script><script type="text/javascript" src="main.js"></script><script type="text/javascript">tailrecursion.hoplon.app_pages.G__84520.hoploninit();</script><div class="navbar navbar-inverse navbar-fixed-top"><div class="container"><div class="navbar-header"><a shape="rect" class="navbar-brand" href="#/home/">Bootstrap Test</a></div><div class="collapse navbar-collapse"><ul class="nav navbar-nav"><li class="active"><a shape="rect" href="#/home/">Home</a></li><li><a shape="rect" href="#/getting-started/">Getting Started</a></li><li><a shape="rect" href="#/about/">About</a></li><li><a shape="rect" href="#/contact/">Contact</a></li></ul></div></div></div><div style="display: block; "><div class="jumbotron" style="background-color: rgb(255, 204, 51); "><div class="container"><h1>Hoplon</h1><p>A simpler way to program the web.</p><p><a shape="rect" class="btn btn-large btn-primary" href="#/getting-started/">Get started »</a></p></div></div><div class="container"><div class="row"><div class="col-md-4"><h2>Clojure, everywhere.</h2><p>Write everything in Clojure and ClojureScript, clientside and
               serverside. Even the page markup is ClojureScript that is
               evaluated to produce the DOM. Pages can still be written using
               the familiar HTML syntax if desired.</p></div><div class="col-md-4"><h2>Simplicity on the client.</h2><p>Use a spreadsheet-like dataflow programming environment to
               manage client state. Develop basic content-oriented pages and
               complex thick-client applications without descending into
               “callback hell”.</p></div><div class="col-md-4"><h2>Simplicity on the server.</h2><p>Decouple business logic from HTTP-related concerns while
               satisfying complex, fine-grained authorization requirements
               with transparent, performant transfer of Clojure data between
               server and client.</p></div></div><hr><div class="row"><div class="col-md-6"><h2>Spreadsheets <small>Client state made simple.</small></h2><p>Remember how awesome spreadsheets are? You never think about
               state when you’re programming a spreadsheet. Instead, you focus
               on values and the formulas that define the relationships between
               them. When a new value is entered into a cell the rest of the 
               spreadsheet updates itself as necessary to maintain the
               correctness of the formulas.</p><p>After a spreadsheet is set up you can link its cells to charts
               and forms to create a user interface that manages its own state,
               automatically. User input flows from forms to input cells.
               Formulas then recompute their values as necessary. These values
               then flow to charts and graphs for the user to view.</p><p>Hoplon applies this crazy, futuristic technology to frontend
               web development. Forgoing the clunky grid metaphor and names
               like <em>A1</em> and <em>B27</em>, Hoplon provides a cell
               reference type. These cells, like cells in a spreadsheet, are
               either updated directly (input cells), or automatically in
               accordance with a formula.</p><hr><h2>Charts and Forms <small>Stateless, automatic UI.</small></h2><p>The purpose of a program's user interface is to transmit input
               from the user to the underlying state model and to present output
               derived from the underlying state model to the user for viewing.</p><p>In a web application the user interface is derived from the page
               markup. User input consists entirely of DOM events: <em>click</em>, <em>change</em>, etc. Output is presented to
               the user by manipulating the properties of DOM elements: adding
               or removing CSS classes, changing the content of text nodes, 
               etc.</p><p>Hoplon provides bindings that can be used to link DOM elements
               to the underlying state model in the same way that charts and
               forms are linked to cells in a spreadsheet. Once the structure
               of the DOM and the linkages between the DOM and cells are
               defined, the user interface manages itself.</p><hr><h2>Page Markup <small>The DOM is a program.</small></h2><p>Imagine a programming environment in which variables cannot
               have names. Instead they have “properties” and are stored in a
               global tree structure. When the program wants to access a
               variable it must walk the tree and find it by matching property
               values. Everything is in the global scope, and everything is
               mutable.</p><p>Insane, you say? Unfortunately, this is the state of affairs
               confronting the frontend developer working with page markup.</p><p>The markup is the literal representation of the DOM. However,
               it completely lacks the most basic affordances of a useful
               programming language. For example, there is no way to refer to
               DOM elements or objects that exist in the page’s JavaScript
               environment in the markup, and there is no way to create 
               reusable components that can be instantiated there.</p><p>The reason for this condition is that the markup is merely a
               static, as-data specification. The evaluation model is
               rudimentary––wholly unsuited to building layered component
               hierarchies.</p></div><div class="col-md-6"><h2><small>The Cells:</small></h2><div class="highlight"><pre><span class="p">(</span><span class="k">def </span><span class="nv">weight</span> <span class="p">(</span><span class="nf">cell</span> <span class="nv">nil</span><span class="p">))</span>
<span class="p">(</span><span class="k">def </span><span class="nv">height</span> <span class="p">(</span><span class="nf">cell</span> <span class="nv">nil</span><span class="p">))</span>

<span class="p">(</span><span class="k">def </span><span class="nv">bmi</span> 
  <span class="p">(</span><span class="nf">cell=</span>
    <span class="p">(</span><span class="nb">when </span><span class="p">(</span><span class="nb">and </span><span class="nv">height</span> <span class="nv">weight</span> <span class="p">(</span><span class="nb">pos? </span><span class="nv">height</span><span class="p">))</span>
      <span class="p">(</span><span class="nb">/ </span><span class="nv">weight</span> <span class="p">(</span><span class="nb">* </span><span class="nv">height</span> <span class="nv">height</span><span class="p">)))))</span>

<span class="p">(</span><span class="k">def </span><span class="nv">bmi-message</span>
  <span class="p">(</span><span class="nf">cell=</span>
    <span class="p">(</span><span class="nb">if-not </span><span class="nv">bmi</span>
      <span class="p">[</span><span class="s">"inherit"</span> <span class="s">"No result yet."</span><span class="p">]</span>
      <span class="p">(</span><span class="nb">cond </span><span class="p">(</span><span class="nb">&lt; </span><span class="nv">bmi</span> <span class="mf">18.5</span><span class="p">)</span> <span class="p">[</span><span class="s">"yellow"</span> <span class="s">"You are underweight."</span><span class="p">]</span>
            <span class="p">(</span><span class="nb">&lt; </span><span class="nv">bmi</span> <span class="mf">25.0</span><span class="p">)</span> <span class="p">[</span><span class="s">"green"</span>  <span class="s">"You are normal."</span><span class="p">]</span>
            <span class="p">(</span><span class="nb">&lt; </span><span class="nv">bmi</span> <span class="mf">30.0</span><span class="p">)</span> <span class="p">[</span><span class="s">"yellow"</span> <span class="s">"You are overweight."</span><span class="p">]</span>
            <span class="ss">:else</span>        <span class="p">[</span><span class="s">"red"</span>    <span class="s">"You are obese."</span><span class="p">]))))</span>

<span class="p">(</span><span class="kd">defn </span><span class="nv">set-bmi-info!</span> <span class="p">[</span><span class="nv">h</span> <span class="nv">w</span><span class="p">]</span>
  <span class="p">(</span><span class="nf">reset!</span> <span class="nv">height</span> <span class="p">(</span><span class="nf">js/parseFloat</span> <span class="nv">h</span><span class="p">))</span>
  <span class="p">(</span><span class="nf">reset!</span> <span class="nv">weight</span> <span class="p">(</span><span class="nf">js/parseFloat</span> <span class="nv">w</span><span class="p">)))</span>
</pre></div><h2><small>The User Interface:</small></h2><div class="highlight"><pre><span class="p">(</span><span class="nf">html</span>
  <span class="p">(</span><span class="nf">head</span>
    <span class="p">(</span><span class="nf">title</span> <span class="s">"BMI Calculator"</span><span class="p">))</span>
  <span class="p">(</span><span class="nf">body</span>
    <span class="p">(</span><span class="nf">h1</span> <span class="s">"BMI Calculator"</span><span class="p">)</span>
    <span class="p">(</span><span class="nf">form</span>
      <span class="ss">:on-submit</span> <span class="o">#</span><span class="p">(</span><span class="nf">set-bmi-info!</span> <span class="p">(</span><span class="nf">val-id</span> <span class="s">"ht"</span><span class="p">)</span> <span class="p">(</span><span class="nf">val-id</span> <span class="s">"wt"</span><span class="p">))</span>
      <span class="p">(</span><span class="nf">label</span> <span class="s">"Height (m): "</span><span class="p">)</span> <span class="p">(</span><span class="nf">input</span> <span class="ss">:id</span> <span class="s">"ht"</span><span class="p">)</span> <span class="p">(</span><span class="nf">br</span><span class="p">)</span>
      <span class="p">(</span><span class="nf">label</span> <span class="s">"Weight (kg): "</span><span class="p">)</span> <span class="p">(</span><span class="nf">input</span> <span class="ss">:id</span> <span class="s">"wt"</span><span class="p">)</span> <span class="p">(</span><span class="nf">br</span><span class="p">)</span>
      <span class="p">(</span><span class="nf">input</span> <span class="ss">:type</span> <span class="s">"submit"</span><span class="p">))</span>

    <span class="p">(</span><span class="nf">h1</span> <span class="s">"Result:"</span><span class="p">)</span>
    <span class="p">(</span><span class="nf">ul</span>
      <span class="p">(</span><span class="nf">li</span>
        <span class="ss">:do-css</span> <span class="p">(</span><span class="nf">cell=</span> <span class="p">{</span><span class="ss">:color</span> <span class="p">(</span><span class="nb">first </span><span class="nv">bmi-message</span><span class="p">)})</span>
        <span class="ss">:do-text</span> <span class="p">(</span><span class="nf">cell=</span> <span class="p">(</span><span class="nb">second </span><span class="nv">bmi-message</span><span class="p">))))))</span>
</pre></div></div></div><hr><footer style="padding-top: 30px; padding-right: 0px; padding-bottom: 30px; padding-left: 0px; ">Copyright 100</footer></div></div><div class="container" style="display: none; "><div class="row"><div class="col-md-2"></div><div class="col-md-8"><div class="page-header"><h1>Hello World</h1></div><p>Hoplon is a set of libraries for making web pages.</p></div><div class="col-md-2"></div></div><div class="row"><div class="col-md-2" style="text-align: right; "><p><b>This is what the code does.</b></p></div><div class="col-md-8"><div class="panel panel-default"><div class="panel-heading">Example:</div><div class="panel-body">Foo bar.</div></div><div class="highlight"><pre><span class="nt">&lt;script</span> <span class="na">type=</span><span class="s">"text/hoplon"</span><span class="nt">&gt;</span>
  (page index.html)
  
  (defn my-list [<span class="err">&amp;</span> items]
    (div
      :class "my-list"
      (apply ul (map #(li (div :class "my-list-item" %)) items))))

  (def clicks (cell 0))
<span class="nt">&lt;/script&gt;</span>
    
<span class="nt">&lt;html&gt;</span>
  <span class="nt">&lt;head&gt;</span>
    <span class="nt">&lt;title&gt;</span>example page<span class="nt">&lt;/title&gt;</span>
  <span class="nt">&lt;/head&gt;</span>
  <span class="nt">&lt;body&gt;</span>
    <span class="nt">&lt;h1&gt;</span>Hello, Hoplon<span class="nt">&lt;/h1&gt;</span>
    
    <span class="nt">&lt;my-list&gt;</span>
      <span class="nt">&lt;span&gt;</span>first thing<span class="nt">&lt;/span&gt;</span>
      <span class="nt">&lt;span&gt;</span>second thing<span class="nt">&lt;/span&gt;</span>
    <span class="nt">&lt;/my-list&gt;</span>

    <span class="nt">&lt;p&gt;&lt;text&gt;</span>You've clicked ~{clicks} times, so far.<span class="nt">&lt;/text&gt;&lt;/p&gt;</span>
    <span class="nt">&lt;button</span> <span class="na">on-click=</span><span class="s">"{{ #(swap! clicks inc) }}"</span><span class="nt">&gt;</span>click me<span class="nt">&lt;/button&gt;</span>
  <span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</pre></div><hr><footer style="padding-top: 30px; padding-right: 0px; padding-bottom: 30px; padding-left: 0px; ">Copyright 100</footer></div><div class="col-md-2"><p>asdf</p></div></div></div><div class="container" style="display: none; "><h1>About</h1><p>This is the about content.</p></div><div class="container" style="display: none; "><h1>Contact</h1><p>This is the contact content.</p></div></body></html>